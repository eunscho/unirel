return(cc)
}
#' Obtain the Gilmer-Feldt reliability coefficient
#'
#' The Gilmer-Feldt coefficient is a unidimensional reliability coefficient
#' based on a congeneric model. The congeneric model is a model that allows
#' the length, discrimination, or importance of items to be different,
#' and is the least restrictive model among the models derived from
#' the classical test theory. The Gilmer-Feldt coefficient has the advantage
#' of being less computational than congeneric reliability (Joreskog 1971)
#' which uses confirmatory factor analysis.However, the Gilmer-Feldt coefficient
#'  derives a value very close to congeneric reliability (Cho in press).
#'  Feldt and Charter (2003) offers a user-friendly review of the Gilmer-Feldt
#'  coefficient.
#'
#' @param data A dataframe or a matrix (unidimensional)
#' @usage gilmer(data)
#' @return The Gilmer-Fedlt coefficient
#' @examples gilmer(Graham1)
#' @references Cho, E. (in press). Neither Cronbach's alpha nor McDonald's omega: A comment on Sijtsma and Pfadt. Psychometrika.
#' @references Feldt, L. S., & Charter, R. A. (2003). Estimation of internal consistency reliability when test parts vary in effective length. Measurement and Evaluation in Counseling and Development, 36(1), 23-27
#' @references Gilmer, J. S., & Feldt, L. S. (1983). Reliability estimation for a test with parts of unknown lengths. Psychometrika, 48(1), 99–111.
#' @references Jöreskog, K. G. (1971). Statistical analysis of sets of congeneric tests. Psychometrika, 36(2), 109–133.
#'
#'
gilmer <- function(data) {
matrix <- get_cov(data)
k <- nrow(matrix)
total <- sum(matrix)
nondiag <- numeric(k)
for (i in 1:k) {
nondiag[i] <- rowSums(matrix)[i] - diag(matrix)[i]
}
key_row <- matrix[order(nondiag)[k], ] # A, B, C, D in Feldt and Charter
D <- (nondiag - key_row) / (max(nondiag) - key_row)
Q <- sum(D)^2
W <- 0
for (i in 1:k) {
W <- W + D[i]^2
}
gilmer <- (Q / (Q - W)) * (sum(nondiag) / total)
return(gilmer)
}
#' Obtain the covariance matrix
#'
#' If the input data is a square matrix, it is converted into a matrix,
#' otherwise the covariance matrix is obtained.
#' The covariance matrix uses the cov function of base,
#' and the option for processing missing values is "pairwise.complete.obs".
#'
#' @param data A dataframe or a matrix
#' @return The covariance matrix
#' @examples
#' get_cov(Graham1)
get_cov <- function(data) {
if (nrow(data) == ncol(data)) {
matrix <- as.matrix(data)
} else {
matrix <- cov(data, use = "pairwise.complete.obs")
}
return(matrix)
}
unirel(Graham1)
#' Obtain Ten Berge and Socan's (2004) mu0
#'
#' Obtain Ten Berge and Socan's (2004) mu0. mu0 equals coefficient alpha.
#' @author Eunseong Cho, \email{bene@kw.ac.kr}
#' @param data a dataframe or a matrix (unidimensional)
#' @references Ten Berge, J. M. F., & Zegers, F. E. (1978). A series of lower
#' bounds to the reliability of a test. Psychometrika, 43(4), 575-579.
#' @examples mu0(Graham1)
#' @seealso [alpha()]
mu0 <- function(data) {
m <- get_cov(data)
n <- nrow(m) / (nrow(m) - 1)
off <- m
diag(off) <- 0
mu0 <- n * sum(off) / sum(m)
return (mu0)
}
unirel(Graham1)
detach("package:lavaan", unload = TRUE)
detach("package:Lambda4", unload = TRUE)
unirel(Graham1)
?lambda5
psych::lambda5
?lambda5
remove.packages("Lambda4", lib="~/R/win-library/4.0")
unirel(Graham1)
unirel(Graham1, Lambda4.include = F)
detach("package:psych", unload = TRUE)
remove.packages("psych", lib="~/R/win-library/4.0")
unirel(Graham1, Lambda4.include = F)
install.packages("psych")
install.packages("Lambda4")
library(Lambda4)
library(psych)
unirel(Graham1)
detach("package:Lambda4", unload = TRUE)
unirel(Graham1)
#' Obtain various unidimensional reliablity coefficients
#'
#' R packages that provide unidimensional reliability coefficients include
#' Lambda4 and psych. These are usually separate functions, so comparing
#' multiple reliability estimates can take a long time. This function shows the
#'  reliability coefficients newly added in this package together with the
#'  reliability coefficients provided by Lambda4 and psych. This function can
#'  provide Table 2 of Cho(in press) immediately.
#'
#'@author Eunseong Cho, \email{bene@kw.ac.kr}
#'@param data a dataframe or a matrix (unidimensional)
#'@param Lambda4.include Whether to include the reliability coefficients
#'provided by the package Lambda4 (lambda5, lambda6, max_lambda, lambda4_max,
#'lambda4_75)
#'@param psych.include Whether to include reliability coefficients
#'(GLB.algebraic, GLB.fa) provided by the package psych
#'@return alpha coefficient alpha
#'@return lambda2 Guttman's lambda2
#'@return mu5 Ten Berge and Zegers' mu5
#'@return cc Feldt's classical congeneric reliability coefficient
#'@return gilmer the Gilmer-Fedlt coefficient
#'@return cr unidimensional CFA (congeneric) reliability
#'@return lambda5 Guttman's lambda5
#'@return lambda5 Guttman's lambda6
#'@return max_lambda the maximum among lambda2, lambda5, and lambda6
#'@return lambda4_max the maximum among all possible lambda4
#'@return lambda4_75 the 75the percentile among all possible lambda4
#'@return glb.algebraic the original estimation of the greatest lower bounds
#'@return glb.fa an improvement of the greatest lower bounds by the psych package
#' @references Cho, E. (in press). Neither Cronbach's alpha nor McDonald's
#' omega: A comment on Sijtsma and Pfadt. Psychometrika.
#' @examples unirel(Graham1)
#' @seealso [Lambda4::lambda5()] for a related function of the package Lambda4
#' @seealso [Lambda4::lambda6()] for a related function of the package Lambda4
#' @seealso [Lambda4::quant.lambda4()] for a related function of the package Lambda4
#' @seealso [psych::GLB.algebraic()] for a related function of the package psych
#' @seealso [psych::GLB.fa()] for a related function of the package psych
unirel <- function(data, Lambda4.include = TRUE, psych.include = TRUE) {
alpha <- alpha(data)
lambda2 <- mu1(data)
mu5 <- mu5(data)
cc <- cc(data)
gilmer <- gilmer(data)
cr <- cr(data)
if (Lambda4.include) {
if (!requireNamespace(Lambda4, quietly = TRUE)) {
stop("Package \"Lambda4\" needed for this function to work. Please install it.",
call. = FALSE)
}
lambda5 <- as.numeric(lambda5(data, missing = "pairwise"))
lambda6 <- as.numeric(lambda6(data, missing = "pairwise"))
max_lambda <- max(lambda2, lambda5, lambda6)
lambda4_max <- quant.lambda4(data, missing = "pairwise",
quantiles = 1)$lambda4.quantile
lambda4_75 <- quant.lambda4(data, missing = "pairwise",
quantiles = .75)$lambda4.quantile
} else {
lambda5 <- lambda6 <- max_lambda <- lambda4_max <- lambda4_75 <- NULL
}
if (psych.include) {
stopifnot(require(psych))
stopifnot(require(Rcsdp))
glb.algebraic <- glb.algebraic(data)$glb[1]
glb.fa <- glb.fa(data)$glb[1]
} else {
glb.algebraic <- glb.fa <- NULL
}
unirel <- list(alpha = alpha,
lambda2 =lambda2,
mu5 = mu5,
cc = cc,
gilmer = gilmer,
cr = cr,
lambda5 = lambda5,
lambda6 = lambda6,
max_lambda = max_lambda,
lambda4_max = lambda4_max,
lambda4_75 = lambda4_75,
glb.algebraic = glb.algebraic,
glb.fa = glb.fa
)
return(unirel)
}
unirel(Graham1)
#' Obtain various unidimensional reliablity coefficients
#'
#' R packages that provide unidimensional reliability coefficients include
#' Lambda4 and psych. These are usually separate functions, so comparing
#' multiple reliability estimates can take a long time. This function shows the
#'  reliability coefficients newly added in this package together with the
#'  reliability coefficients provided by Lambda4 and psych. This function can
#'  provide Table 2 of Cho(in press) immediately.
#'
#'@author Eunseong Cho, \email{bene@kw.ac.kr}
#'@param data a dataframe or a matrix (unidimensional)
#'@param Lambda4.include Whether to include the reliability coefficients
#'provided by the package Lambda4 (lambda5, lambda6, max_lambda, lambda4_max,
#'lambda4_75)
#'@param psych.include Whether to include reliability coefficients
#'(GLB.algebraic, GLB.fa) provided by the package psych
#'@return alpha coefficient alpha
#'@return lambda2 Guttman's lambda2
#'@return mu5 Ten Berge and Zegers' mu5
#'@return cc Feldt's classical congeneric reliability coefficient
#'@return gilmer the Gilmer-Fedlt coefficient
#'@return cr unidimensional CFA (congeneric) reliability
#'@return lambda5 Guttman's lambda5
#'@return lambda5 Guttman's lambda6
#'@return max_lambda the maximum among lambda2, lambda5, and lambda6
#'@return lambda4_max the maximum among all possible lambda4
#'@return lambda4_75 the 75the percentile among all possible lambda4
#'@return glb.algebraic the original estimation of the greatest lower bounds
#'@return glb.fa an improvement of the greatest lower bounds by the psych package
#' @references Cho, E. (in press). Neither Cronbach's alpha nor McDonald's
#' omega: A comment on Sijtsma and Pfadt. Psychometrika.
#' @examples unirel(Graham1)
#' @seealso [Lambda4::lambda5()] for a related function of the package Lambda4
#' @seealso [Lambda4::lambda6()] for a related function of the package Lambda4
#' @seealso [Lambda4::quant.lambda4()] for a related function of the package Lambda4
#' @seealso [psych::GLB.algebraic()] for a related function of the package psych
#' @seealso [psych::GLB.fa()] for a related function of the package psych
unirel <- function(data, Lambda4.include = TRUE, psych.include = TRUE) {
alpha <- alpha(data)
lambda2 <- mu1(data)
mu5 <- mu5(data)
cc <- cc(data)
gilmer <- gilmer(data)
cr <- cr(data)
if (Lambda4.include) {
if (!requireNamespace("Lambda4", quietly = TRUE)) {
stop("Package \"Lambda4\" needed for this function to work. Please install it.",
call. = FALSE)
}
lambda5 <- as.numeric(lambda5(data, missing = "pairwise"))
lambda6 <- as.numeric(lambda6(data, missing = "pairwise"))
max_lambda <- max(lambda2, lambda5, lambda6)
lambda4_max <- quant.lambda4(data, missing = "pairwise",
quantiles = 1)$lambda4.quantile
lambda4_75 <- quant.lambda4(data, missing = "pairwise",
quantiles = .75)$lambda4.quantile
} else {
lambda5 <- lambda6 <- max_lambda <- lambda4_max <- lambda4_75 <- NULL
}
if (psych.include) {
stopifnot(require(psych))
stopifnot(require(Rcsdp))
glb.algebraic <- glb.algebraic(data)$glb[1]
glb.fa <- glb.fa(data)$glb[1]
} else {
glb.algebraic <- glb.fa <- NULL
}
unirel <- list(alpha = alpha,
lambda2 =lambda2,
mu5 = mu5,
cc = cc,
gilmer = gilmer,
cr = cr,
lambda5 = lambda5,
lambda6 = lambda6,
max_lambda = max_lambda,
lambda4_max = lambda4_max,
lambda4_75 = lambda4_75,
glb.algebraic = glb.algebraic,
glb.fa = glb.fa
)
return(unirel)
}
unirel(Graham1)
?requireNamespace
my_fun <- function() {
if (!requireNamespace("Lambda4", quietly = TRUE)) {
stop("Package \"Lambda4\" needed for this function to work. Please install it.",
call. = FALSE)
}
}
my_fun()
my_fun <- function() {
if (!requireNamespace("Lambda4", quietly = TRUE)) {
stop("Package \"Lambda4\" needed for this function to work. Please install it.",
call. = FALSE)
}
print("a")
}
my_fun()
my_fun <- function() {
if (!requireNamespace("Lambda4", quietly = TRUE)) {
stop("Package \"Lambda4\" needed for this function to work. Please install it.",
call. = FALSE)
print("c")
}
print("a")
}
my_fun()
test <- function() {
stop()
}
test
test
unirel <- function(data, Lambda4.include = TRUE, psych.include = TRUE) {
alpha <- alpha(data)
lambda2 <- mu1(data)
mu5 <- mu5(data)
cc <- cc(data)
gilmer <- gilmer(data)
cr <- cr(data)
if (Lambda4.include) {
if(!requireNamespace("Lambda4")) {
stop("This function requires the Lambda4 package installed")
}
lambda5 <- as.numeric(lambda5(data, missing = "pairwise"))
lambda6 <- as.numeric(lambda6(data, missing = "pairwise"))
max_lambda <- max(lambda2, lambda5, lambda6)
lambda4_max <- quant.lambda4(data, missing = "pairwise",
quantiles = 1)$lambda4.quantile
lambda4_75 <- quant.lambda4(data, missing = "pairwise",
quantiles = .75)$lambda4.quantile
} else {
lambda5 <- lambda6 <- max_lambda <- lambda4_max <- lambda4_75 <- NULL
}
if (psych.include) {
stopifnot(require(psych))
stopifnot(require(Rcsdp))
glb.algebraic <- glb.algebraic(data)$glb[1]
glb.fa <- glb.fa(data)$glb[1]
} else {
glb.algebraic <- glb.fa <- NULL
}
unirel <- list(alpha = alpha,
lambda2 =lambda2,
mu5 = mu5,
cc = cc,
gilmer = gilmer,
cr = cr,
lambda5 = lambda5,
lambda6 = lambda6,
max_lambda = max_lambda,
lambda4_max = lambda4_max,
lambda4_75 = lambda4_75,
glb.algebraic = glb.algebraic,
glb.fa = glb.fa
)
return(unirel)
}
remove.packages("Lambda4", lib="~/R/win-library/4.0")
unirel(Graham1)
#' Obtain various unidimensional reliablity coefficients
#'
#' R packages that provide unidimensional reliability coefficients include
#' Lambda4 and psych. These are usually separate functions, so comparing
#' multiple reliability estimates can take a long time. This function shows the
#'  reliability coefficients newly added in this package together with the
#'  reliability coefficients provided by Lambda4 and psych. This function can
#'  provide Table 2 of Cho(in press) immediately.
#'
#'@author Eunseong Cho, \email{bene@kw.ac.kr}
#'@param data a dataframe or a matrix (unidimensional)
#'@param Lambda4.include Whether to include the reliability coefficients
#'provided by the package Lambda4 (lambda5, lambda6, max_lambda, lambda4_max,
#'lambda4_75)
#'@param psych.include Whether to include reliability coefficients
#'(GLB.algebraic, GLB.fa) provided by the package psych
#'@return alpha coefficient alpha
#'@return lambda2 Guttman's lambda2
#'@return mu5 Ten Berge and Zegers' mu5
#'@return cc Feldt's classical congeneric reliability coefficient
#'@return gilmer the Gilmer-Fedlt coefficient
#'@return cr unidimensional CFA (congeneric) reliability
#'@return lambda5 Guttman's lambda5
#'@return lambda5 Guttman's lambda6
#'@return max_lambda the maximum among lambda2, lambda5, and lambda6
#'@return lambda4_max the maximum among all possible lambda4
#'@return lambda4_75 the 75the percentile among all possible lambda4
#'@return glb.algebraic the original estimation of the greatest lower bounds
#'@return glb.fa an improvement of the greatest lower bounds by the psych package
#' @references Cho, E. (in press). Neither Cronbach's alpha nor McDonald's
#' omega: A comment on Sijtsma and Pfadt. Psychometrika.
#' @examples unirel(Graham1)
#' @seealso [Lambda4::lambda5()] for a related function of the package Lambda4
#' @seealso [Lambda4::lambda6()] for a related function of the package Lambda4
#' @seealso [Lambda4::quant.lambda4()] for a related function of the package Lambda4
#' @seealso [psych::GLB.algebraic()] for a related function of the package psych
#' @seealso [psych::GLB.fa()] for a related function of the package psych
unirel <- function(data, Lambda4.include = TRUE, psych.include = TRUE) {
alpha <- alpha(data)
lambda2 <- mu1(data)
mu5 <- mu5(data)
cc <- cc(data)
gilmer <- gilmer(data)
cr <- cr(data)
if (Lambda4.include) {
stopifnot(require(Lambda4))
lambda5 <- as.numeric(lambda5(data, missing = "pairwise"))
lambda6 <- as.numeric(lambda6(data, missing = "pairwise"))
max_lambda <- max(lambda2, lambda5, lambda6)
lambda4_max <- quant.lambda4(data, missing = "pairwise",
quantiles = 1)$lambda4.quantile
lambda4_75 <- quant.lambda4(data, missing = "pairwise",
quantiles = .75)$lambda4.quantile
} else {
lambda5 <- lambda6 <- max_lambda <- lambda4_max <- lambda4_75 <- NULL
}
if (psych.include) {
stopifnot(require(psych))
stopifnot(require(Rcsdp))
glb.algebraic <- glb.algebraic(data)$glb[1]
glb.fa <- glb.fa(data)$glb[1]
} else {
glb.algebraic <- glb.fa <- NULL
}
unirel <- list(alpha = alpha,
lambda2 =lambda2,
mu5 = mu5,
cc = cc,
gilmer = gilmer,
cr = cr,
lambda5 = lambda5,
lambda6 = lambda6,
max_lambda = max_lambda,
lambda4_max = lambda4_max,
lambda4_75 = lambda4_75,
glb.algebraic = glb.algebraic,
glb.fa = glb.fa
)
return(unirel)
}
unirel(Graham1)
install.packages("Lambda4")
unirel(Graham1)
use_git()
library(devtools)
use_git()
load("C:/Users/me/Dropbox/Psychometrika/unirel/unirel/.RData")
read.dcf(DESCRIPTION)
unirel
devtools::load_all(".")
unirel
?unirel
devtools::load_all(".")
devtools::load_all(".")
devtools::load_all(".")
unirel(Graham1)
?unirel
?cr
?unirel
library(roxygen2)
roxygenise()
?joreskog
roxygenise()
?joreskog
library(formatR)
tidy_dir("R")
?joreskog
roxygenise()
?joreskog
install.packages("lintr")
library(lintr)
lint_package()
print("<U+00F6>")
print("ö")
print("\u00F6")
print(\u00F6)
print("\u00F6")
print("a\u00F6b")
roxygenise()
?cr
roxygenise()
?cr
roxygenise()
?cr
roxygenise()
?cr
roxygenise()
?cr
roxygenise()
?cr
library(devtools)
document()
?cr
package?unirel
?uni
browseVignettes("psych")
browseVignettes("Lambda4")
use_vignette("my-vignette")
load_all()
unirel(Graham1)
library(testthat)
use_testthat()
library(testthat)
library(unirel)
test_check("unirel")
test()
test()
use_test(cr)
use_test(cr.r)
test()
test()
test_this()
install.packages("testthis")
library(testthis)
test_this()
test_skeleton()
test_this()
test()
test_skeleton()
test_this()
test_skeleton()
test_this()
test()
search()
Sys.which("make")
Sys.which("make")
Sys.which("make")
